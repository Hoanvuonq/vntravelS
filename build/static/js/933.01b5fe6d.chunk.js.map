{"version":3,"file":"static/js/933.01b5fe6d.chunk.js","mappings":"8NAUA,MA8DA,EA9D8CA,IAAe,IAAd,KAAEC,GAAMD,EACnD,MAAOE,EAAWC,IAAgBC,EAAAA,EAAAA,UAAyB,KAE3DC,EAAAA,EAAAA,YAAU,KAC0BC,WAC5B,IACI,MAAMC,QAAiBC,EAAAA,EAAAA,IAA0BP,EAAKQ,KAClDF,EAASL,WAAaK,EAASL,WAAaK,EAASL,WACrDC,EAAaI,EAASL,UAE9B,CAAE,MAAOQ,GACLC,QAAQD,MAAM,0DAAkCA,EACpD,GAGJE,EAAyB,GAC1B,CAACX,EAAKQ,MAoBT,OACII,EAAAA,EAAAA,KAAA,OAAKC,UAAU,0BAAyBC,SACnCb,EAAUc,KAAKC,IACZC,EAAAA,EAAAA,MAAA,OAA2BJ,UAAU,0FAAyFC,SAAA,EAC1HG,EAAAA,EAAAA,MAAA,OAAKJ,UAAU,2CAA0CC,SAAA,EACrDF,EAAAA,EAAAA,KAAA,OAAKM,IAAKC,EAAAA,EAAOC,OAAQC,IAAI,WAAWR,UAAU,qCAClDI,EAAAA,EAAAA,MAAA,KAAAH,SAAA,CAAIE,EAAYM,OAAO,gBAEvBV,EAAAA,EAAAA,KAAA,KAAAE,SAAIE,EAAYO,YAEnBP,EAAYO,OAAOC,gBAAkBC,EAAAA,EAAkBC,QAAQF,gBAC5DP,EAAAA,EAAAA,MAAA,OAAKJ,UAAU,iBAAgBC,SAAA,EAC3BF,EAAAA,EAAAA,KAACe,EAAAA,QAAO,CAACC,QAAQ,mBAAUd,UACvBF,EAAAA,EAAAA,KAAA,OAAKM,IAAKC,EAAAA,EAAOU,UAAWR,IAAI,QAAQR,UAAU,sBAAsBiB,QAASA,IA/BvFzB,WAClB,UACU0B,EAAAA,EAAAA,IAAmBC,GACzB9B,EAAaD,EAAUc,KAAKkB,GAAOA,EAAEzB,MAAQwB,EAAgB,IAAKC,EAAGV,OAAQE,EAAAA,EAAkBS,SAAYD,IAC/G,CAAE,MAAOxB,GACLC,QAAQD,MAAM,gDAA+BA,EACjD,GAyB+G0B,CAAcnB,EAAYR,UAErHI,EAAAA,EAAAA,KAACe,EAAAA,QAAO,CAACC,QAAQ,yBAASd,UACtBF,EAAAA,EAAAA,KAAA,OAAKM,IAAKC,EAAAA,EAAOiB,UAAWf,IAAI,SAASR,UAAU,sBAAsBiB,QAASA,IAzBzFzB,WACjB,UACUgC,EAAAA,EAAAA,IAAkBL,GACxB9B,EAAaD,EAAUc,KAAKkB,GAAOA,EAAEzB,MAAQwB,EAAgB,IAAKC,EAAGV,OAAQE,EAAAA,EAAkBa,OAAUL,IAC7G,CAAE,MAAOxB,GACLC,QAAQD,MAAM,iDAA8BA,EAChD,GAmBgH8B,CAAavB,EAAYR,cAbvHQ,EAAYR,QAmBxB,C","sources":["pages/admin/components/withdrawHistory.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { images } from 'assets';\r\nimport { Tooltip } from '@material-tailwind/react';\r\nimport { rejectTransaction, confirmTransaction, getUserTransactionHistory } from 'api/admin';\r\nimport { TransactionStatus, ITransaction, IUserInfo } from 'api/type';\r\n\r\ninterface PopupProps {\r\n    user: IUserInfo;\r\n}\r\n\r\nconst WithdrawHistory: React.FC<PopupProps> = ({ user }) => {\r\n    const [withdraws, setWithdraws] = useState<ITransaction[]>([]);\r\n\r\n    useEffect(() => {\r\n        const fetchTransactionHistory = async () => {\r\n            try {\r\n                const response = await getUserTransactionHistory(user._id);\r\n                if (response.withdraws && response.withdraws && response.withdraws) {\r\n                    setWithdraws(response.withdraws);\r\n                }\r\n            } catch (error) {\r\n                console.error('Lỗi khi lấy lịch sử giao dịch:', error);\r\n            }\r\n        };\r\n\r\n        fetchTransactionHistory();\r\n    }, [user._id]);\r\n\r\n    const handleConfirm = async (transactionId: string) => {\r\n        try {\r\n            await confirmTransaction(transactionId);\r\n            setWithdraws(withdraws.map((w) => (w._id === transactionId ? { ...w, status: TransactionStatus.SUCCESS } : w)));\r\n        } catch (error) {\r\n            console.error('Lỗi khi xác nhận giao dịch:', error);\r\n        }\r\n    };\r\n\r\n    const handleReject = async (transactionId: string) => {\r\n        try {\r\n            await rejectTransaction(transactionId);\r\n            setWithdraws(withdraws.map((w) => (w._id === transactionId ? { ...w, status: TransactionStatus.ERROR } : w)));\r\n        } catch (error) {\r\n            console.error('Lỗi khi từ chối giao dịch:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col gap-[1vw]\">\r\n            {withdraws.map((transaction) => (\r\n                <div key={transaction._id} className=\"flex items-center justify-between gap-[1vw] border-t-[0.1vw] border-gray-300 pt-[0.5vw]\">\r\n                    <div className=\"flex items-center xl:gap-[2vw] gap-[6vw]\">\r\n                        <img src={images.Total1} alt=\"withdraw\" className=\"xl:w-[3vw] w-[10vw] hover-items\" />\r\n                        <p>{transaction.amount} VNĐ</p>\r\n                        {/* <p>{new Date(transaction.requestTime).toLocaleString()}</p>  */}\r\n                        <p>{transaction.status}</p>\r\n                    </div>\r\n                    {transaction.status.toLowerCase() === TransactionStatus.PENDING.toLowerCase() && (\r\n                        <div className=\"flex gap-[1vw]\">\r\n                            <Tooltip content=\"Xác Nhận\">\r\n                                <img src={images.checkIcon} alt=\"check\" className=\"w-[2vw] hover-items\" onClick={() => handleConfirm(transaction._id)} />\r\n                            </Tooltip>\r\n                            <Tooltip content=\"Hủy Đơn\">\r\n                                <img src={images.errorIcon} alt=\"reject\" className=\"w-[2vw] hover-items\" onClick={() => handleReject(transaction._id)} />\r\n                            </Tooltip>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default WithdrawHistory;\r\n"],"names":["_ref","user","withdraws","setWithdraws","useState","useEffect","async","response","getUserTransactionHistory","_id","error","console","fetchTransactionHistory","_jsx","className","children","map","transaction","_jsxs","src","images","Total1","alt","amount","status","toLowerCase","TransactionStatus","PENDING","Tooltip","content","checkIcon","onClick","confirmTransaction","transactionId","w","SUCCESS","handleConfirm","errorIcon","rejectTransaction","ERROR","handleReject"],"sourceRoot":""}